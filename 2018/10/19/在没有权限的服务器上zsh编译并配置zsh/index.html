<!DOCTYPE html><html lang="Chinese, English"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>在没有权限的服务器上zsh编译并配置zsh | Hopen's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">在没有权限的服务器上zsh编译并配置zsh</h1><a id="logo" href="/.">Hopen's Blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">在没有权限的服务器上zsh编译并配置zsh</h1><div class="post-meta">Oct 19, 2018</div><div class="post-content"><h4 id="问题产生的原因"><a href="#问题产生的原因" class="headerlink" title="问题产生的原因"></a>问题产生的原因</h4><p>由于服务器上没有root权限，因此没有办法用apt来安装软件，软件需要自己下载源码编译。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><h5 id="1-环境配置"><a href="#1-环境配置" class="headerlink" title="1. 环境配置"></a>1. 环境配置</h5><p>为了让软件安装在指定的位置，需要在编译过程中添加–prefix=$INSTALLATION参数<br>这样make install后，编译结果会放在$$INSTALLATION中，其中包括</p>
<ul>
<li>bin 存放二进制文件</li>
<li>lib 存放库文件</li>
<li>share 存放共享文件</li>
<li>include 存放头文件</li>
</ul>
<p>除此之外，为了让配置程序知道这些位置，我们需要使用下面的语句：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CPPFLAGS=<span class="string">"-I<span class="variable">$INSTALLATION</span>/include"</span> LDFLAGS=<span class="string">"-L<span class="variable">$INSTALLATION</span>/lib"</span></span><br></pre></td></tr></table></figure></p>
<p>当程序安装好后为了让shell能找到这些程序，我们需要将$INSTALLATION/bin加入到$PATH中，可以使用下面的命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"PATH=<span class="variable">$INSTALLATION</span>/bin:<span class="variable">$PATH</span>"</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>这样以后装的软件就都可以直接在终端中调用了~~</p>
<h5 id="2-依赖配置"><a href="#2-依赖配置" class="headerlink" title="2. 依赖配置"></a>2. 依赖配置</h5><p>zsh编译存在一连串的依赖，关系如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zsh -&gt; autoconf &amp;  ncurses</span><br><span class="line">autoconf -&gt;GNU m4</span><br></pre></td></tr></table></figure></p>
<p>因此，可按下面的安装顺序安装依赖软件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GNU m4 -&gt; autoconf -&gt; ncurses -&gt;zsh</span><br></pre></td></tr></table></figure></p>
<p>下面附上下载地址:</p>
<ul>
<li>ncurse: <a href="https://ftp.gnu.org/gnu/ncurses/ncurses-6.1.tar.gz" target="_blank" rel="noopener">https://ftp.gnu.org/gnu/ncurses/ncurses-6.1.tar.gz</a></li>
<li>m4: <a href="https://ftp.gnu.org/gnu/m4/m4-latest.tar.xz" target="_blank" rel="noopener">https://ftp.gnu.org/gnu/m4/m4-latest.tar.xz</a></li>
<li>autoconf: <a href="http://ftp.gnu.org/gnu/autoconf/autoconf-latest.tar.gz" target="_blank" rel="noopener">http://ftp.gnu.org/gnu/autoconf/autoconf-latest.tar.gz</a></li>
<li>zsh: <a href="https://github.com/zsh-users/zsh/archive/zsh-5.6.2.zip" target="_blank" rel="noopener">https://github.com/zsh-users/zsh/archive/zsh-5.6.2.zip</a></li>
</ul>
<h5 id="3-遇到的问题"><a href="#3-遇到的问题" class="headerlink" title="3. 遇到的问题"></a>3. 遇到的问题</h5><ul>
<li><p>6.0版本的m4无法编译，换成6.1版本即可</p>
</li>
<li><p>虽然编译并安装了ncurses, 但编译zsh的时候依然无法找到，错误信息如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">configure: error: &quot;No terminal handling library was found on your system.</span><br><span class="line">This is probably a library called &apos;curses&apos; or &apos;ncurses&apos;.  You may</span><br><span class="line">need to install a package called &apos;curses-devel&apos; or &apos;ncurses-devel&apos; on your</span><br><span class="line">system.&quot;</span><br><span class="line">See `config.log&apos; for more details</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>可以通过配置环境来解决（第一部分）</p>
<ul>
<li>最后，如果make install提示错误，忽略即可（虽然报了错，实际上软件已经编译好了）</li>
</ul>
</div><div class="tags"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://hopexn.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/19/在没有权限的服务器上zsh编译并配置zsh/">在没有权限的服务器上zsh编译并配置zsh</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Hopen's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>